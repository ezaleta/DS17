{"version":3,"file":"ng-google-one-tap.js","sources":["../../../projects/ng-google-one-tap/src/lib/toke.ts","../../../projects/ng-google-one-tap/src/lib/ng-google-one-tap.service.ts","../../../projects/ng-google-one-tap/src/lib/ng-google-one-tap.module.ts","../../../projects/ng-google-one-tap/src/public-api.ts","../../../projects/ng-google-one-tap/src/ng-google-one-tap.ts"],"names":[],"mappings":"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","sourcesContent":["import { configuration } from './model/tap.model';\nimport { InjectionToken } from \"@angular/core\";\n\nexport const CONFIGURATION = new InjectionToken<configuration>('CONFIGURATION')","import { configuration, credentialRes, UserInfo } from './model/tap.model';\nimport { Injectable, NgZone } from '@angular/core';\nimport { Inject } from '@angular/core';\nimport { CONFIGURATION } from './toke';\nimport { Subject } from 'rxjs';\nimport { PromptMomentNotification } from './model/promptmoment.model';\n\ndeclare var window: any;\n@Injectable()\nexport class NgOneTapService {\n\n    private _promtMoment = new Subject<PromptMomentNotification>();\n    private _oneTapCredentialResponse = new Subject<credentialRes>();\n    private _authUserResponse = new Subject<UserInfo>();\n\n    get promtMoment() {\n        return this._promtMoment.asObservable();\n    }\n\n    get oneTapCredentialResponse() {\n        return this._oneTapCredentialResponse.asObservable();\n    }\n\n    get authUserResponse() {\n        return this._authUserResponse.asObservable();\n    }\n\n    constructor(@Inject(CONFIGURATION) private envConfig: configuration,\n    private ngZone: NgZone) { }\n\n    tapInitialize(config?: configuration) {\n        window.onload = () => {\n            this.tapRender(config);\n        }\n        if (document.readyState == 'complete') {\n            this.tapRender(config);\n        }\n    }\n\n    private tapRender(config: configuration) {\n        const conf = {...this.envConfig, ...config };\n        if (!!conf?.disable_exponential_cooldowntime) {\n            document.cookie = 'g_state' +'=;Path=/;';\n        }\n        window.google.accounts.id.initialize({\n            ...conf, callback: (auth) => {\n                this.ngZone.run(() => {\n                    if (!!conf.authvalidate_by_googleapis) {\n                        const http = new XMLHttpRequest();\n                        const url = `https://oauth2.googleapis.com/tokeninfo?id_token=${auth.credential}`;\n                        http.open('GET', url);\n                        http.send();\n                        http.onreadystatechange = () => {\n                            if (http.readyState == 4 && http.status == 200) {\n                                this._authUserResponse.next(JSON.parse(http.responseText));\n                            }\n                        };\n                    }\n                    this._oneTapCredentialResponse.next(auth);\n                });\n            }\n        });\n        window.google.accounts.id.prompt((pmt) => {\n            this._promtMoment.next(pmt);\n        });\n    }\n\n    signOut() {\n        window.google.accounts.id.disableAutoSelect();\n    }\n\n    cancelTheTap() {\n        window.google.accounts.id.cancel();\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { configuration } from './model/tap.model';\nimport { NgOneTapService } from './ng-google-one-tap.service';\nimport { CONFIGURATION } from './toke';\n\n\n@NgModule({\n    declarations: [\n    ],\n    imports: [\n    ],\n    exports: [\n    ]\n})\n\nexport class NgGoogleOneTapModule {\n    constructor() {\n        let oneTapLib = document.createElement('script');\n        oneTapLib.async = true;\n        oneTapLib.src = 'https://accounts.google.com/gsi/client';\n        document.head.appendChild(oneTapLib);\n    }\n    public static config(config: configuration): any {        \n        return {\n            ngModule: NgGoogleOneTapModule,\n            providers: [\n                {provide: CONFIGURATION, useValue: config},\n                NgOneTapService\n            ]\n        }\n    }\n}\n","/*\n * Public API Surface of ng-google-one-tap\n */\n\nexport * from './lib/ng-google-one-tap.service';\nexport * from './lib/ng-google-one-tap.module';\nexport * from './lib/model/promptmoment.model';\nexport * from './lib/model/tap.model';","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {CONFIGURATION as Éµa} from './lib/toke';"]}